<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<head>
	<title>Lịch sử thi thử</title>
	<link rel="stylesheet" th:href="@{../css/view-profile.css}">
</head>

<body>
	<th:block layout:fragment="content">
		<section id="breadcrumbs" class="breadcrumbs d-flex align-items-center">
			<div class="container">
				<div class="d-flex justify-content-between align-items-center">
					<h2>Lịch sử thi thử</h2>
					<ol>
						<li><a th:href="@{/}">Trang chủ</a></li>
						<li>Lịch sử thi thử</li>
					</ol>
				</div>
			</div>
		</section>
		<div class="container emp-profile">
			<form method="post">
				<div class="row">
					<div class="col-md-4">
	                    <div class="profile-img">
	                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52y5aInsxSm31CvHOFHWujqUx_wWTS9iM6s7BAm21oEN_RiGoog" alt=""/>
	                        <div class="file btn btn-lg btn-primary">
	                            Đổi hình ảnh
	                            <input type="file" name="file"/>
	                        </div>
	                    </div>
	                </div>
	                <div class="col-md-6">
	                    <div class="profile-head">
                            <h4>[[${account.lastName}]] [[${account.middleName}]] [[${account.firstName}]]</h4>
                            <h5>Quản trị viên</h5>
	                    </div>
	                </div>
	                <div class="col-md-2">
                        <a th:href="@{/view-profile-update}" class="btn btn-xs btn-primary mb-3">Sửa thông tin</a>
                    </div>
				</div>
			</form>
		</div>
		<div class="container-xxl my-3">
			<div class="profile-container">
				<div class="row row-space-20">
					<div class="col-12-md-8">
						<div class="tab-content p-0">
							<div class="tab-pane active show" id="profile-about">
								<div>
									<ul class="nav nav-tabs">
										<li class="nav-item">
											<a class="nav-link" aria-current="page" th:href="@{/view-profile}">Thông tin
												cá nhân</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" th:href="@{/view-profile-learning-progress}">Tiến độ học
												tập</a>
										</li>
										<li class="nav-item">
											<a class="nav-link active" th:href="@{/view-history-trial-test}">Lịch sử thi
												thử</a>
										</li>
										<li class="nav-item">
											<a class="nav-link" th:href="@{/view-profile-registed-exam}">Kì thi thật
												đã đăng ký</a>
										</li>
									</ul>
								</div>
								<div class="mt-5 row">
								<h3><strong>Số lần thi thử</strong> : <span th:text="${countTrialExamResult}"></span></h3>
								<h3><strong>Tỉ lệ thi đậu</strong>: <span th:text="|${#numbers.formatDecimal(percentPass, 0, 2)} %|" class="text-danger fw-bold"></span></h3>
								</div>
								<div class="col-12 mt-5">
									<!--<form class="row mt-3" th:action="@{/view-history-trial-test}" th:object="${drivingLicenseForm}" method="POST">-->
										<!--<input type="hidden" th:field="*{drivingLicenseId}">-->
										<table class="table table-bordered mt-4">
											<thead class="mt-1" style="background-color: rgb(213, 213, 213);">
												<tr class="text-center">
													<th scope="col"></th>
													<th scope="col">Loại bằng</th>
													<th scope="col">Tên đề thi</th>
													<th scope="col">Ngày thi</th>
													<th scope="col">Số câu hỏi</th>
													<th scope="col">Trả lời đúng</th>
													<th scope="col">Trả lời sai</th>
													<th scope="col">Câu liệt</th>
													<th scope="col">Thời gian làm bài</th>
													<th scope="col">Kết quả</th>
													<th scope="col">Chi tiết</th>
												</tr>
											</thead>
											<tbody >
												<tr class="text-center" th:each="trialExamResult,stat : ${listTrialExamResult}">
													<td th:text="${stat.index + 1}"></td>
													<th th:text="${trialExamResult.examQuestions.drivingLicense.name}"></th>
													<td th:text="${trialExamResult.examQuestions.name}"></td>
													<td th:text="${#dates.format(trialExamResult.createAt, 'dd/MM/yyyy HH:mm')}"></td>
													<td th:text="${trialExamResult.examQuestions.drivingLicense.numberQuestion}"></td>
													<!--<td th:with="filtered=${trialExamResult.listHistoryAnswer.?[isCorrect]}">[[${filtered.size}]]</td>-->
													<td th:with="filtered1=${trialExamResult.listHistoryAnswer.?[!correct]}">[[${filtered1.size}]]</td>
													<td th:text="${trialExamResult.examQuestions.drivingLicense.numberQuestionParalysis}"></td>
													<td th:text="|${trialExamResult.timeExam} phút|"></td>
													<td>
														<span th:if="${trialExamResult.pass}">Đạt</span>
														<span th:unless="${trialExamResult.pass}">Không đạt</span>
													</td>
													
													<td><a type="button" class="btn btn-xs btn-primary mb-3" th:href="@{${'/detail-history-trial-test?trialExamResultId='} + ${trialExamResult.trialExamResultId}}">Chi
															tiết</a>
													</td>

												</tr>
												
											</tbody>
										</table>
									<!--</form>-->
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</th:block>
</body>

</html>